# ğŸŒ¿ Personal Health - Flutter App

> ç²¾æº–å€‹äººåŒ–å¥åº·ç®¡ç† - è·¨å¹³å°è¡Œå‹•æ‡‰ç”¨ç¨‹å¼

---

## ğŸ“± åŠŸèƒ½ç‰¹è‰²

### âœ… å·²å¯¦ç¾åŠŸèƒ½
- **å€‹äººæª”æ¡ˆç®¡ç†**ï¼šå®Œæ•´è¡¨å–®é©—è­‰ï¼ˆå§“å/å¹´é½¡/èº«é«˜/é«”é‡ï¼‰
- **å¥æª¢å ±å‘Šä¸Šå‚³**ï¼šæ”¯æ´æ‹ç…§èˆ‡ç›¸ç°¿é¸å–ï¼Œè‡ªå‹• OCR è§£æ
- **å¥åº·å„€è¡¨æ¿**ï¼šè¶¨å‹¢åœ–è¡¨ã€ç•°å¸¸æŒ‡æ¨™ã€AI å»ºè­°æ‘˜è¦
- **AI å°è©±åŠ©æ‰‹**ï¼šä¸Šä¸‹æ–‡ç†è§£ã€è‡ªå‹•æ²å‹•ã€æ™‚é–“æˆ³è¨˜ã€æ¸…é™¤å°è©±
- **ç’°å¢ƒé…ç½®**ï¼šæ”¯æ´ development/staging/production ä¸‰ç¨®ç’°å¢ƒ

### ğŸ¯ æŠ€è¡“äº®é»
- **è¡¨å–®é©—è­‰**ï¼šå³æ™‚éŒ¯èª¤æç¤ºï¼Œä¿éšœæ•¸æ“šè³ªé‡
- **ç‹€æ…‹ç®¡ç†**ï¼šRiverpod 2.6.1
- **HTTP Client**ï¼šDio 5.9.0 + ç’°å¢ƒé…ç½®
- **åœ–è¡¨å¯è¦–åŒ–**ï¼šfl_chart 0.68.0
- **åœ–ç‰‡é¸å–**ï¼šimage_picker æ”¯æ´ç›¸æ©Ÿ/ç›¸ç°¿

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Flutter 3.27.1+
- Dart 3.6.0+
- Windows 10+ / macOS / Linux
- å¾Œç«¯ API é‹è¡Œæ–¼ `http://localhost:8000`

### å®‰è£èˆ‡é‹è¡Œ

```bash
# å®‰è£ä¾è³´
flutter pub get

# Windows æ¡Œé¢ç‰ˆï¼ˆæ¨è–¦ç”¨æ–¼é–‹ç™¼ï¼‰
flutter run -d windows

# Android æ¨¡æ“¬å™¨
flutter run -d emulator-5554

# iOS æ¨¡æ“¬å™¨
flutter run -d iPhone

# Chrome ç€è¦½å™¨ï¼ˆéœ€å…ˆåŸ·è¡Œ flutter create . å•Ÿç”¨ webï¼‰
flutter run -d chrome
```

### ç’°å¢ƒé…ç½®

#### 1. æœ¬åœ°é–‹ç™¼ï¼ˆé è¨­ï¼‰
```bash
flutter run
```
API é€£æ¥åˆ° `http://localhost:8000/api/v1`

#### 2. çœŸæ©Ÿæ¸¬è©¦
ä¿®æ”¹ `lib/config/api_config.dart`ï¼š
```dart
return 'http://YOUR_LOCAL_IP:8000/api/v1';  // ä¾‹å¦‚ 192.168.1.100
```

æŸ¥è©¢æ‚¨çš„ IPï¼š
```powershell
# Windows
ipconfig | findstr IPv4

# macOS/Linux
ifconfig | grep "inet "
```

#### 3. ç’°å¢ƒåˆ‡æ›
```bash
# é–‹ç™¼ç’°å¢ƒï¼ˆé è¨­ï¼‰
flutter run --dart-define=ENV=development

# æ¸¬è©¦ç’°å¢ƒ
flutter run --dart-define=ENV=staging

# æ­£å¼ç’°å¢ƒ
flutter run --dart-define=ENV=production
```

è©³ç´°èªªæ˜è«‹åƒè€ƒ [ENV_CONFIG.md](ENV_CONFIG.md)

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
lib/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ api_config.dart          # ğŸ”§ API ç’°å¢ƒé…ç½®
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.dart                # ä½¿ç”¨è€…æ¨¡å‹
â”‚   â”œâ”€â”€ report.dart              # å ±å‘Šæ¨¡å‹
â”‚   â”œâ”€â”€ history.dart             # æ­·å²è¨˜éŒ„æ¨¡å‹
â”‚   â””â”€â”€ chat.dart                # å°è©±è¨Šæ¯æ¨¡å‹ï¼ˆå« fromJsonï¼‰
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ home_shell.dart          # ä¸»æ¡†æ¶ï¼ˆåº•éƒ¨å°èˆªï¼‰
â”‚   â”œâ”€â”€ profile_page.dart        # âœ¨ å€‹äººè³‡æ–™é ï¼ˆå«è¡¨å–®é©—è­‰ï¼‰
â”‚   â”œâ”€â”€ upload_page.dart         # ä¸Šå‚³å¥æª¢å ±å‘Š
â”‚   â”œâ”€â”€ dashboard_page.dart      # å¥åº·å„€è¡¨æ¿
â”‚   â””â”€â”€ chat_page.dart           # âœ¨ AI å°è©±é ï¼ˆå« UX å„ªåŒ–ï¼‰
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api_client.dart          # âœ¨ Dio Clientï¼ˆç’°å¢ƒé…ç½® + æ—¥èªŒï¼‰
â”‚   â”œâ”€â”€ user_service.dart        # ä½¿ç”¨è€… API
â”‚   â”œâ”€â”€ report_service.dart      # å ±å‘Š API
â”‚   â””â”€â”€ chat_service.dart        # å°è©± API
â”œâ”€â”€ state/
â”‚   â””â”€â”€ app_state.dart           # Riverpod å…¨åŸŸç‹€æ…‹
â”œâ”€â”€ widgets/                     # å…±ç”¨å…ƒä»¶ï¼ˆç›®å‰ç‚ºç©ºï¼‰
â”œâ”€â”€ app_theme.dart               # ä¸»é¡Œé…ç½®
â””â”€â”€ main.dart                    # æ‡‰ç”¨ç¨‹å¼å…¥å£
```

---

## ğŸ¯ åŠŸèƒ½è©³è§£

### 1. å€‹äººè³‡æ–™é ï¼ˆProfile Pageï¼‰

#### è¡¨å–®é©—è­‰è¦å‰‡
| æ¬„ä½ | è¦å‰‡ | éŒ¯èª¤æç¤º |
|-----|------|---------|
| å§“å | å¿…å¡«ï¼Œâ‰¥2 å­—å…ƒ | ã€Œè«‹è¼¸å…¥å§“åã€ã€Œå§“åè‡³å°‘éœ€2å€‹å­—å…ƒã€ |
| å¹´é½¡ | 1-120 æ­² | ã€Œè«‹è¼¸å…¥å¹´é½¡ã€ã€Œå¹´é½¡éœ€ä»‹æ–¼ 1-120 æ­²ã€ |
| èº«é«˜ | 50-250 cm | ã€Œè«‹è¼¸å…¥èº«é«˜ã€ã€Œèº«é«˜éœ€ä»‹æ–¼ 50-250 cmã€ |
| é«”é‡ | 20-300 kg | ã€Œè«‹è¼¸å…¥é«”é‡ã€ã€Œé«”é‡éœ€ä»‹æ–¼ 20-300 kgã€ |

#### ç‰¹è‰²
- âœ… å³æ™‚é©—è­‰ï¼Œç´…å­—éŒ¯èª¤æç¤º
- âœ… æ”¯æ´é£²é£Ÿç¿’æ…£/å¥åº·ç›®æ¨™å¤šé¸
- âœ… è‡ªå‹•è¨ˆç®— BMIï¼ˆå¾Œç«¯ï¼‰

### 2. ä¸Šå‚³é ï¼ˆUpload Pageï¼‰

#### æµç¨‹
1. é¸æ“‡æª”æ¡ˆï¼ˆç›¸æ©Ÿ ğŸ“· æˆ–ç›¸ç°¿ ğŸ–¼ï¸ï¼‰
2. é è¦½åœ–ç‰‡
3. é–‹å§‹åˆ†æï¼ˆOCR è§£æ â†’ AI ç”Ÿæˆå»ºè­°ï¼‰
4. è‡ªå‹•è·³è½‰ Dashboard æŸ¥çœ‹çµæœ

#### æ”¯æ´æ ¼å¼
- JPG / PNGï¼ˆæœªä¾†å¯æ“´å±• PDFï¼‰

### 3. å¥åº·å„€è¡¨æ¿ï¼ˆDashboard Pageï¼‰

#### å±•ç¤ºå…§å®¹
- ğŸ“Š **å¥åº·è©•åˆ†**ï¼šæœ¬æœŸç¶œåˆè©•åˆ†
- ğŸ“ˆ **è¶¨å‹¢åœ–è¡¨**ï¼šæ­·å²æ•¸æ“šèµ°å‹¢ï¼ˆfl_chartï¼‰
- âš ï¸ **ç•°å¸¸æŒ‡æ¨™**ï¼šç´…å­—æŒ‡æ¨™æ¸…å–®
- ğŸ **é£²é£Ÿå»ºè­°**ï¼šAI ç”Ÿæˆçš„é£Ÿç™‚å»ºè­°
- ğŸ’Š **ä¿å¥å»ºè­°**ï¼šè£œå……å“å»ºè­°

### 4. AI å°è©±é ï¼ˆChat Pageï¼‰

#### åŠŸèƒ½
- ğŸ’¬ ä¸Šä¸‹æ–‡ç†è§£ï¼ˆè¨˜ä½ä½¿ç”¨è€…è³‡æ–™èˆ‡å ±å‘Šï¼‰
- â±ï¸ æ™‚é–“æˆ³è¨˜ï¼ˆé¡¯ç¤ºæ¯å‰‡è¨Šæ¯æ™‚é–“ï¼‰
- ğŸ”„ è‡ªå‹•æ²å‹•åˆ°æœ€æ–°è¨Šæ¯
- ğŸ—‘ï¸ æ¸…é™¤å°è©±ï¼ˆå«ç¢ºèªå½ˆçª—ï¼‰
- ğŸ’¬ è¼¸å…¥ä¸­æç¤º

#### ä½¿ç”¨å ´æ™¯
```
User: ã€Œé€™é€±èœå–®çš„è‹¦ç“œå¯ä»¥æ›æ‰å—ï¼Ÿã€
AI:   ã€Œæ²’å•é¡Œï¼è€ƒæ…®åˆ°æ‚¨éœ€è¦é™è¡€ç³–ï¼Œæˆ‘å€‘å¯ä»¥æ›æˆç§‹è‘µæˆ–æ·±ç¶ è‰²è”¬èœ...ã€
```

---

## ğŸ”§ API æ•´åˆ

### ç’°å¢ƒé…ç½®ï¼ˆapi_config.dartï¼‰
```dart
static String get baseUrl {
  switch (environment) {
    case 'production':
      return 'https://api.personalhealth.com/api/v1';
    case 'staging':
      return 'https://staging-api.personalhealth.com/api/v1';
    case 'development':
    default:
      return 'http://localhost:8000/api/v1';
  }
}
```

### API Client ç‰¹æ€§
- âœ… Dio æ””æˆªå™¨ï¼ˆè‡ªå‹•æ—¥èªŒï¼‰
- âœ… è¶…æ™‚è¨­å®šï¼ˆ10s é€£æ¥ / 30s æ¥æ”¶ï¼‰
- âœ… ç’°å¢ƒè®Šæ•¸åˆ‡æ›
- âœ… Debug æ¨¡å¼è‡ªå‹•é–‹å•Ÿè©³ç´°æ—¥èªŒ

---

## ğŸ§ª æ¸¬è©¦

### ç†±é‡è¼‰ï¼ˆé–‹ç™¼ä¸­ï¼‰
åœ¨ App é‹è¡Œæ™‚ï¼Œçµ‚ç«¯æŒ‰ `r` å³æ™‚æ›´æ–°

### åŠŸèƒ½æ¸¬è©¦å»ºè­°
1. **Profile é©—è­‰**ï¼šè¼¸å…¥ç„¡æ•ˆæ•¸æ“šï¼ˆå¦‚å¹´é½¡ `abc`ã€èº«é«˜ `500`ï¼‰
2. **Upload æµç¨‹**ï¼šæ¸¬è©¦ç›¸æ©Ÿ/ç›¸ç°¿æ¬Šé™ã€æª”æ¡ˆå¤§å°é™åˆ¶
3. **Dashboard**ï¼šæª¢æŸ¥åœ–è¡¨æ¸²æŸ“ã€ç•°å¸¸æŒ‡æ¨™é¡¯ç¤º
4. **Chat äº’å‹•**ï¼šæ¸¬è©¦å°è©±è¨˜æ†¶ã€è‡ªå‹•æ²å‹•ã€æ¸…é™¤åŠŸèƒ½

---

## ğŸ“¦ ä¾è³´å¥—ä»¶

```yaml
dependencies:
  flutter_riverpod: ^2.6.1        # ç‹€æ…‹ç®¡ç†
  dio: ^5.9.0                     # HTTP Client
  image_picker: ^1.2.0            # åœ–ç‰‡é¸å–
  fl_chart: ^0.68.0               # åœ–è¡¨å¯è¦–åŒ–
  cupertino_icons: ^1.0.8         # iOS é¢¨æ ¼åœ–æ¨™
```

---

## ğŸ› å·²çŸ¥å•é¡Œèˆ‡è§£æ±º

### 1. Windows é¦–æ¬¡é‹è¡ŒéŒ¯èª¤
**éŒ¯èª¤**ï¼š`Building with plugins requires symlink support`

**è§£æ±º**ï¼šå•Ÿç”¨é–‹ç™¼äººå“¡æ¨¡å¼
```powershell
start ms-settings:developers
```

### 2. çœŸæ©Ÿç„¡æ³•é€£æ¥ localhost
**åŸå› **ï¼šæ‰‹æ©Ÿç„¡æ³•è¨ªå•é›»è…¦çš„ localhost

**è§£æ±º**ï¼šä¿®æ”¹ `lib/config/api_config.dart`ï¼Œæ”¹ç”¨é›»è…¦ IP
```dart
return 'http://192.168.1.100:8000/api/v1';  // æ›¿æ›æˆæ‚¨çš„ IP
```

### 3. OCR è§£æè¶…æ™‚
**åŸå› **ï¼šåœ–ç‰‡éå¤§æˆ–ç¶²è·¯å»¶é²

**è§£æ±º**ï¼š
- å£“ç¸®åœ–ç‰‡è‡³ < 5MB
- å¢åŠ  `receiveTimeout` è¨­å®š

---

## ğŸ‰ æœªä¾†è¦åŠƒ

### Phase 4.5ï¼ˆä¸‹å€‹ Sprintï¼‰
- [ ] å ±å‘Šæ­·å²åˆ—è¡¨é 
- [ ] å ±å‘Šè©³ç´°æª¢è¦–é 
- [ ] é›¢ç·šæ¨¡å¼æ”¯æ´
- [ ] æ¨æ’­é€šçŸ¥ï¼ˆæé†’ä¸Šå‚³å ±å‘Šï¼‰

### Phase 5ï¼ˆç”¢å“åŒ–ï¼‰
- [ ] JWT èªè­‰æ•´åˆ
- [ ] ç”Ÿç‰©è­˜åˆ¥ç™»å…¥ï¼ˆFace ID / æŒ‡ç´‹ï¼‰
- [ ] App Store / Google Play ä¸Šæ¶
- [ ] å¤šèªè¨€æ”¯æ´ï¼ˆè‹±æ–‡/ç¹ä¸­/ç°¡ä¸­ï¼‰

---

## ğŸ“„ ç›¸é—œæ–‡æª”
- [ç’°å¢ƒé…ç½®èªªæ˜](ENV_CONFIG.md)
- [å¾Œç«¯ API æ–‡æª”](http://localhost:8000/docs)
- [å°ˆæ¡ˆæŠ€è¡“è¦æ ¼](../../01_æŠ€è¡“è¦æ ¼æ–‡ä»¶_MVPæ ¸å¿ƒæ¶æ§‹.md)
- [é–‹ç™¼ä»»å‹™è¨ˆç•«](../../04_é–‹ç™¼ä»»å‹™è¨ˆç•«_TaskPlan.md)

---

**é–‹ç™¼åœ˜éšŠ**ï¼šPersonal Health Team  
**æœ€å¾Œæ›´æ–°**ï¼š2026-01-17  
**ç‰ˆæœ¬**ï¼šv1.2.0

